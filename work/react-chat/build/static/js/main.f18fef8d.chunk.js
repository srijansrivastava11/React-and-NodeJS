(this["webpackJsonpreact-chat"]=this["webpackJsonpreact-chat"]||[]).push([[0],[,,,,function(e,t,n){e.exports=n(11)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(3),s=n.n(c),o=n(1),i=(n(9),function(){return fetch("/availableUser",{method:"POST",body:JSON.stringify({}),headers:new Headers({"content-type":"application/json"})}).catch((function(){return Promise.reject({error:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}),u=function(e){e.user;var t=e.onLogin,n=Object(a.useState)(""),c=Object(o.a)(n,2),s=c[0],u=c[1],l=Object(a.useState)(""),m=Object(o.a)(l,2),f=m[0],h=m[1];return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"title"},'"Welcome, Please Login with your details"'),r.a.createElement("div",{className:"heading"},"Enter Username"),r.a.createElement("input",{className:"username",name:"text",type:"text",onChange:function(e){var t=e.target.value;u(t)},value:s}),r.a.createElement("button",{className:"create",type:"button",onClick:function(){var e;(e=s,fetch("/session",{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({username:e})}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))).then((function(e){t(e),i()})).catch((function(e){h(e.error)}))}},"Login"),r.a.createElement("div",{className:"status"},f))},l=function(e){var t=e.onLogin,n=Object(a.useState)(!1),c=Object(o.a)(n,2),s=c[0],i=c[1];return r.a.createElement("div",null,s?r.a.createElement("div",null,r.a.createElement("button",{className:"btn-home",type:"button",onClick:function(){i(!1)}},"Home"),r.a.createElement(u,{onLogin:t})):r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"title"},"Chat App"),r.a.createElement("div",{className:"sub-title"},"Get Started"),r.a.createElement("div",{className:"btn-starters"},r.a.createElement("button",{className:"btn-start",type:"button",onClick:function(){i(!0)}},"Chat"),r.a.createElement("div",{className:"divider"}))))};var m=function(e){var t=e.messagelist;if(0===Object.keys(t).length)return r.a.createElement("div",{className:"messages"},r.a.createElement("h3",null,"Messages"));var n=t.chats.map((function(e){return r.a.createElement("p",{className:"message",key:e.timestamp},e.timestamp," ",e.username,": ",e.message)}));return r.a.createElement("div",{className:"messages"},r.a.createElement("h3",null,"Messages"),r.a.createElement("ul",{className:"message-list"},n))};var f=function(e){var t=e.getMessage,n=e.GetchatList,c=e.setMessageList,s=e.error,i=e.setError,u=Object(a.useState)(""),l=Object(o.a)(u,2),m=l[0],f=l[1];return r.a.createElement("div",{className:"outgoing"},r.a.createElement("input",{className:"message",name:"text",type:"text",onChange:function(e){f(e.target.value)},value:m}),r.a.createElement("button",{className:"btn-msg",type:"button",onClick:function(){t(m),f(""),i(""),n({setMessageList:c})}},"Send"),r.a.createElement("div",{className:"status"},s))},h=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(""),i=Object(o.a)(s,2),u=i[0],l=i[1],h=function(e){var t=e.setMessageList,n=e.setError;fetch("/message",{method:"GET"}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(e){t(e)})).catch((function(e){n(e.error)}))};return Object(a.useEffect)((function(){h({setMessageList:c,setError:l});var e=setInterval((function(){h({setMessageList:c,setError:l})}),2e3);return function(){clearInterval(e)}}),[]),r.a.createElement("div",{id:"chat-app"},r.a.createElement("div",{className:"title"},"Chat Application"),r.a.createElement("div",{className:"container"},r.a.createElement(f,{getMessage:function(e){var t;(t=e,fetch("/message",{method:"POST",body:JSON.stringify({message:t}),headers:new Headers({"content-type":"application/json"})}).catch((function(){return Promise.reject({error:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))).then((function(){})).catch((function(e){l(e.error)}))},GetchatList:h,setMessageList:c,error:u,setError:l}),r.a.createElement("div",{className:"chat-panel"},r.a.createElement(m,{messagelist:n}))))},d=function(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(!1),u=Object(o.a)(s,2),l=u[0],m=u[1],f=Object(a.useState)(""),d=Object(o.a)(f,2),E=d[0],v=d[1],g=Object(a.useState)(""),j=Object(o.a)(g,2),b=j[0],N=j[1],p=function(){fetch("/availableUser",{method:"GET"}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(e){v(""),N(e)})).catch((function(e){v(e.error),N("")}))};Object(a.useEffect)((function(){p();var e=setInterval((function(){p()}),2e3);return function(){clearInterval(e)}}),[]);var O=Object.values(b).map((function(e){return r.a.createElement("p",{className:"avail-user",key:e.name},e.name)}));return r.a.createElement("div",null,l?r.a.createElement(h,null):r.a.createElement("div",null,r.a.createElement("div",{className:"title"},"Welcome"),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"users"},r.a.createElement("div",{className:"heading"},"Active Users"),r.a.createElement("ul",{className:"user-list"},O),r.a.createElement("div",{className:"status"},E))),r.a.createElement("div",null,r.a.createElement("button",{className:"btn-view",type:"button",onClick:function(){i().then((function(e){m(!0)})).catch((function(e){c(e.error)}))}},"Start Chat")),r.a.createElement("div",{className:"status"},n)))},E=function(e){var t=e.user,n=e.onLogout;return r.a.createElement("ul",null,t.isLoggedIn?r.a.createElement("div",null,r.a.createElement("button",{className:"btn-logout",type:"button",onClick:function(){fetch("/session",{method:"DELETE"}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(){return n()}))}},"Logout")):"")};var v=function(){var e,t=Object(a.useState)({isLoggedIn:!1}),n=Object(o.a)(t,2),c=n[0],s=n[1],i=Object(a.useState)(""),u=Object(o.a)(i,2),m=u[0],f=u[1],h=Object(a.useState)(""),v=Object(o.a)(h,2),g=v[0],j=v[1];return Object(a.useEffect)((function(){fetch("/session",{method:"GET"}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():Promise.reject({code:"login-invalid"})})).then((function(e){s({isLoggedIn:!0}),f(e.userName)})).catch((function(e){j(e.error),s({isLoggedIn:!1})}))}),[]),e=c.isLoggedIn?r.a.createElement(d,{userName:m,error:g}):r.a.createElement(l,{onLogin:function(e){s({isLoggedIn:!0}),f(e.userName)}}),r.a.createElement("div",{className:"App"},r.a.createElement(E,{user:c,onLogout:function(){s({isLoggedIn:!1})}}),e)};n(10);s.a.render(r.a.createElement(v,null),document.getElementById("root"))}],[[4,1,2]]]);
//# sourceMappingURL=main.f18fef8d.chunk.js.map